@{
    ViewData["Title"] = "Home Page";
}

@model List<mWords.Models.EntityModels.DictionarySet>

<div class="text-center">
    <h1 class="display-4">Welcome</h1>
    <p>Learn about <a href="https://docs.microsoft.com/aspnet/core">building Web apps with ASP.NET Core</a>.</p>
</div>

<div class="container">
    <div class="row">
        <div class="col-sm">
            One of three columns
        </div>
        <div class="col-sm">
            One of three columns
        </div>
        <div class="col-sm">
            One of three columns
        </div>
    </div>
</div>


<div class="container">
    @{ 
        var tempRowItems = new List<mWords.Models.EntityModels.DictionarySet>();
        var rowsCount = 3;
    }
    @foreach (var item in Model.Select((value, i) => new { i, value }))
    {
        tempRowItems.Add(item.value);

        @if ((item.i+1 % 3 == 0 && tempRowItems.Count > 0) || item.i+1 == Model.Count())
        {
            <div class="row">
                @foreach (var rowItem in tempRowItems)
                {
                    <div class="col-sm">
                        

                        <div class="card" style="background-color: @rowItem.CoverColorHex;">
                            <div class="card-body">
                                <h5 class="card-title">@rowItem.Name</h5>
                                <h6 class="card-subtitle mb-2 text-muted">languages: @rowItem.LanguagesPair</h6>
                                <h6 class="card-subtitle mb-2 text-muted">
                                    <span data-toggle="tooltip" data-placement="right" title="@rowItem.LevelDescription">
                                        level: @rowItem.Level
                                    </span>
                                </h6>
                                <h6 class="card-subtitle mb-2 text-muted">status: <span class="badge badge-success">Started</span></h6>
                                <h6 class="card-subtitle mb-2 text-muted">progress:</h6>
                                <div class="progress">
                                    <div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: 10%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <button type="button" class="btn btn-outline-secondary mt-3">Start</button>
                                <button type="button" class="btn btn-outline-info mt-3" data-toggle="modal" data-target="#exampleModalCenter">Statistics</button>
                            </div>
                        </div>


                    </div>
                }

                @if (tempRowItems.Count != rowsCount)
                {
                    var iter = rowsCount - tempRowItems.Count(); 

                    @for (int i = 0; i < iter; i++)
                    {
                        <div class="col-sm"></div>
                    }
                }

            </div>
        }
    }

</div>

    @foreach (var dSet in Model)
    {
        @*<div class="card mb-3 float-left mr-4 mt-4 mb-4" style="max-width: 18rem; background-color: @dSet.CoverColorHex;">
                <div class="card-header">
                    <h4>@dSet.Name</h4>
                    <span>@dSet.LanguagesPair</span>
                </div>
                <div class="card-body">
                    <h5 class="card-title">Success card title</h5>
                    <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                </div>
                <div class="card-footer bg-transparent">
                    <button type="button" class="btn btn-primary">Start</button>
                </div>
            </div>*@

        <div class="card mb-3 float-left mr-4 mt-4 mb-4" style="width: 18rem; background-color: @dSet.CoverColorHex;">
            <div class="card-body">
                <h5 class="card-title">@dSet.Name</h5>
                <h6 class="card-subtitle mb-2 text-muted">languages: @dSet.LanguagesPair</h6>
                <h6 class="card-subtitle mb-2 text-muted">
                    <span data-toggle="tooltip" data-placement="right" title="@dSet.LevelDescription">
                        level: @dSet.Level
                    </span>
                </h6>
                <h6 class="card-subtitle mb-2 text-muted">status: <span class="badge badge-success">Started</span></h6>
                <h6 class="card-subtitle mb-2 text-muted">progress:</h6>
                <div class="progress">
                    <div class="progress-bar progress-bar-striped bg-info" role="progressbar" style="width: 10%" aria-valuenow="50" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <button type="button" class="btn btn-outline-secondary mt-3">Start</button>
                <button type="button" class="btn btn-outline-info mt-3" data-toggle="modal" data-target="#exampleModalCenter">Statistics</button>
            </div>
        </div>
    }

    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalCenterTitle">Statistics</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    The statistics content
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
